<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPO Unlock Tracker | Anchor & Pre-IPO Lock-ins</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=2">
</head>

<body>
    <div class="app-container">
        <!-- ... -->
        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/date-fns@3.3.1/cdn.min.js"></script>
        <script src="app.js?v=2"></script>
        <!-- Header -->
        <header>
            <div class="logo">
                <span class="icon">üîì</span>
                <h1>IPO Unlock Tracker</h1>
            </div>
            <div class="header-actions">
                <button id="refreshBtn" class="refresh-btn">
                    <span class="icon">‚Üª</span> Refresh Data
                </button>
                <div class="last-updated">
                    Updated: <span id="lastUpdated">--</span>
                </div>
            </div>
        </header>

        <!-- Stats Section -->
        <section class="stats-grid">
            <div class="stat-card highlight">
                <h3>Unlocks This Week</h3>
                <div class="stat-value" id="countThisWeek">0</div>
                <div class="stat-label">Companies</div>
            </div>
            <div class="stat-card">
                <h3>Upcoming (Next 30 Days)</h3>
                <div class="stat-value" id="countUpcoming">0</div>
                <div class="stat-label">Events</div>
            </div>
            <div class="stat-card">
                <h3>Total Tracked</h3>
                <div class="stat-value" id="countTotal">0</div>
                <div class="stat-label">IPOs (2025-26)</div>
            </div>
        </section>

        <!-- Filters -->
        <section class="controls">
            <div class="filter-group">
                <button class="filter-btn active" data-filter="week">This Week</button>
                <button class="filter-btn" data-filter="upcoming">Upcoming</button>
                <button class="filter-btn" data-filter="all">All History</button>
            </div>

            <div class="filter-group">
                <button class="type-filter-btn active" data-type="all">All Types</button>
                <button class="type-filter-btn" data-type="Mainboard">Mainboard</button>
                <button class="type-filter-btn" data-type="SME">SME</button>
            </div>

            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search company...">
            </div>

            <div class="toggle-group">
                <label class="toggle">
                    <input type="checkbox" id="showAnchor" checked>
                    <span class="toggle-label">Anchor</span>
                </label>
                <label class="toggle">
                    <input type="checkbox" id="showPreIPO" checked>
                    <span class="toggle-label">Pre-IPO</span>
                </label>
            </div>

        </section>

        <!-- Main Data Table -->
        <div class="table-container">
            <table id="unlockTable">
                <thead>
                    <tr>
                        <th style="width: 30%">Company</th>
                        <th style="width: 15%">Listing Date</th>
                        <th style="width: 15%">30-Day Unlock</th>
                        <th style="width: 15%">90-Day Unlock</th>
                        <th style="width: 25%">Pre-IPO Lock-in</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Data will be injected here -->
                </tbody>
            </table>
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Fetching Unlock Data...</p>
            </div>
            <div id="noData" class="no-data hidden">
                <p>No unlock events found matching your criteria.</p>
            </div>
        </div>
    </div>

    <!-- Unlock Timeline Modal -->
    <div id="preIPOModal" class="modal-overlay hidden">
        <div class="modal-card">
            <button class="modal-close" id="modalClose">&times;</button>
            <div class="modal-header">
                <h2 id="modalCompanyName"></h2>
                <div class="modal-header-badges">
                    <div id="modalBadge" class="modal-badge"></div>
                    <div id="modalExchangeBadge" class="modal-exchange-badge"></div>
                </div>
            </div>
            <div class="modal-body">
                <!-- Timeline -->
                <div class="unlock-timeline">
                    <div class="timeline-item" id="timelineListing">
                        <div class="timeline-icon">üìÖ</div>
                        <div class="timeline-content">
                            <div class="timeline-label">Listing Date</div>
                            <div class="timeline-date" id="tlListingDate">‚Äî</div>
                            <div class="timeline-sub" id="tlListingSub"></div>
                            <div class="timeline-status" id="tlListingStatus"></div>
                        </div>
                    </div>
                    <div class="timeline-item" id="timelineAnchor30">
                        <div class="timeline-icon">üîì</div>
                        <div class="timeline-content">
                            <div class="timeline-label">1-Month Anchor Unlock</div>
                            <div class="timeline-date" id="tlAnchor30Date">‚Äî</div>
                            <div class="timeline-sub" id="tlAnchor30Sub"></div>
                            <div class="timeline-status" id="tlAnchor30Status"></div>
                        </div>
                    </div>
                    <div class="timeline-item" id="timelineAnchor90">
                        <div class="timeline-icon">üîê</div>
                        <div class="timeline-content">
                            <div class="timeline-label">3-Month Anchor Unlock</div>
                            <div class="timeline-date" id="tlAnchor90Date">‚Äî</div>
                            <div class="timeline-sub" id="tlAnchor90Sub"></div>
                            <div class="timeline-status" id="tlAnchor90Status"></div>
                        </div>
                    </div>
                    <div class="timeline-item" id="timelinePreIPO">
                        <div class="timeline-icon">üöÄ</div>
                        <div class="timeline-content">
                            <div class="timeline-label">Pre-IPO Lock-in Expiry</div>
                            <div class="timeline-date" id="tlPreIPODate">‚Äî</div>
                            <div class="timeline-sub" id="tlPreIPOSub"></div>
                            <div class="timeline-status" id="tlPreIPOStatus"></div>
                        </div>
                    </div>
                </div>
                <!-- Unlock Details from BSE Annexure-I -->
                <div id="unlockDetailsSection" class="unlock-details" style="display:none;">
                    <div class="unlock-details-header">
                        <span class="unlock-details-title">üìä BSE Annexure-I Details</span>
                        <span id="unlockDetailsNotice" class="unlock-notice-id"></span>
                    </div>
                    <div id="unlockDetailsContent"></div>
                </div>
                <div id="unlockDetailsLoading" class="unlock-loading" style="display:none;">
                    <div class="loader-spinner"></div>
                    <span>Fetching BSE circular data...</span>
                </div>
                <div class="modal-divider"></div>
                <p class="modal-hint">Find full shareholder lock-in details (Annexure-I) on:</p>
                <div class="modal-actions">
                    <a id="bseLink" href="#" target="_blank" class="modal-btn modal-btn-bse">
                        <span class="btn-icon">üèõÔ∏è</span> BSE Notices
                    </a>
                    <a id="nseLink" href="#" target="_blank" class="modal-btn modal-btn-nse">
                        <span class="btn-icon">üìä</span> NSE Circulars
                    </a>
                </div>
                <button id="copyNameBtn" class="modal-copy-btn">
                    üìã Copy Company Name
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/date-fns@3.3.1/cdn.min.js"></script>
    <script src="app.js"></script>
</body>

</html>